<apex:page id="p" docType="html-5.0" controller="Researchgrantcontroller" standardStylesheets="true" lightningStylesheets="true" showHeader="false" sidebar="false" cache="false" title="FLAME University - The Pioneers of Liberal Education in India" >
<html>
    <apex:slds />
    <c:Flame_HeadResource /> 

<head>

    <script type="text/javascript">

        // This function handles style and display changes for each next button click

      function handleWizardNext()

        {

            if (document.getElementById('ButtonNext').name == 'Step2')

            {


                try {
                    var PNameObj = document.getElementById("{!$Component.myForm.ProjectName}");
                    var ProjectNameerrObj = document.getElementById("{!$Component.myForm.ProjectNameerrMsg}");
                    if (PNameObj.value.length == 0) {
                    PNameObj.focus();
                    PNameObj.scrollIntoView();
                    ProjectNameerrObj.innerHTML = "Please insert Project Name."
                    return false;
                    }else{
                    ProjectNameerrObj.innerHTML = "";
                    }   
            
                    var BNameObj = CKEDITOR.instances['{!$Component.myForm.BackgroundScope}'].getData();
                    var BackgroundScopeerrObj = document.getElementById("{!$Component.myForm.BackgroundScopeerrMsg}");
                    var BfNameObj =  CKEDITOR.instances['{!$Component.myForm.BackgroundScope}'].document.$;
                    CKEDITOR.instances['{!$Component.myForm.BackgroundScope}'].container.focus();
                    CKEDITOR.instances['{!$Component.myForm.BackgroundScope}'].container.scrollIntoView();
                    if (BNameObj.replace(/<[^>]*>/gi, '').length === 0) {
                   
                    BackgroundScopeerrObj.innerHTML = "Please insert Background Scope."
                    return false;
                    }else{
                    BackgroundScopeerrObj.innerHTML = "";
                    }   
                        
                    var RNameObj = CKEDITOR.instances['{!$Component.myForm.ResearchQuestions}'].getData();
                    var ResearchQuestionserrObj = document.getElementById("{!$Component.myForm.ResearchQuestionserrMsg}");
                    var RfNameObj =  CKEDITOR.instances['{!$Component.myForm.ResearchQuestions}'].document.$;
                    CKEDITOR.instances['{!$Component.myForm.ResearchQuestions}'].container.focus();
                    CKEDITOR.instances['{!$Component.myForm.ResearchQuestions}'].container.scrollIntoView();
                    if (RNameObj.replace(/<[^>]*>/gi, '').length === 0) {
                   
                    ResearchQuestionserrObj.innerHTML = "Please insert Research Questions."
                    return false;
                    }else{
                    ResearchQuestionserrObj.innerHTML = "";
                    }   
                   
                    var BrNameObj = CKEDITOR.instances['{!$Component.myForm.BriefReview}'].getData();
                    var BriefReviewerrObj = document.getElementById("{!$Component.myForm.BriefReviewerrMsg}");
                    var BrfNameObj =  CKEDITOR.instances['{!$Component.myForm.BriefReview}'].document.$;
                    CKEDITOR.instances['{!$Component.myForm.BriefReview}'].container.focus();
                    CKEDITOR.instances['{!$Component.myForm.BriefReview}'].container.scrollIntoView();
                    if (BrNameObj.replace(/<[^>]*>/gi, '').length === 0) {
                   
                    BriefReviewerrObj.innerHTML = "Please insert Brief Review."
                    return false;
                    }else{
                    BriefReviewerrObj.innerHTML = "";
                    }   
                    
                    var MNameObj = CKEDITOR.instances['{!$Component.myForm.Methodology}'].getData();
                    var MethodologyerrObj = document.getElementById("{!$Component.myForm.MethodologyerrMsg}");
                    var MfNameObj =  CKEDITOR.instances['{!$Component.myForm.Methodology}'].document.$;
                    CKEDITOR.instances['{!$Component.myForm.Methodology}'].container.focus();
                    CKEDITOR.instances['{!$Component.myForm.Methodology}'].container.scrollIntoView();
                    if (MNameObj.replace(/<[^>]*>/gi, '').length === 0) {
                   
                    MethodologyerrObj.innerHTML = "Please insert Methodology."
                    return false;
                    }else{
                    MethodologyerrObj.innerHTML = "";
                    }   
                   
                
                } catch (e) {
                alert(e);
                
               return false;
                }
                
                // Change the button name - we use this to keep track of which step to display on a click

                document.getElementById('ButtonNext').name = 'Step3';

                document.getElementById('ButtonPrevious').name = 'Step1';

                // Disable/enable buttons when reach reach start and review steps

                document.getElementById('ButtonPrevious').disabled = '';

                // Set new step to display and turn off display of current step

                document.getElementById('Step1').style.display = 'none';

                document.getElementById('Step2').style.display = '';

                // Change background color on header to highlight new step

                document.getElementById('HeaderTableStep2').style.backgroundColor = 'Yellow';

                document.getElementById('HeaderTableStep1').style.backgroundColor = 'Silver';
               document.location.href = '#top';
            }

            else if (document.getElementById('ButtonNext').name == 'Step3')

            {
                try {
                    var fNameObj = document.getElementById("{!$Component.myForm.Description1}");
                    var DescriptionerrObj1 = document.getElementById("{!$Component.myForm.Description1errMsg}");
                    if (fNameObj.value.length == 0) {
                    fNameObj.focus();
                    fNameObj.scrollIntoView();
                    DescriptionerrObj1.innerHTML = "Please insert Description1."
                    return false;
                    }else{
                    DescriptionerrObj1.innerHTML = "";
                    }   
                    
                    var dateObj = document.getElementById("{!$Component.myForm.Date1}");
                    var DateerrObj2 = document.getElementById("{!$Component.myForm.Date1errMsg}");
                    if (dateObj.value.length == 0) {
                    dateObj.focus();
                    dateObj.scrollIntoView();
                    DateerrObj2.innerHTML = "Please insert Date1."
                    return false;
                    }else{
                    DateerrObj2.innerHTML = "";
                    }      
                    
                    var lNameObj = document.getElementById("{!$Component.myForm.outcome1}");
                    var outcomeerrObj3 = document.getElementById("{!$Component.myForm.outcome1errMsg}");
                    if (lNameObj.value.length == 0) {
                    lNameObj.focus();
                    lNameObj.scrollIntoView();
                    outcomeerrObj3.innerHTML = "Please insert outcome1."
                    return false;
                    }else{
                    outcomeerrObj3.innerHTML = "";
                    }                        
                    
                    
                    var fNameObj2 = document.getElementById("{!$Component.myForm.Description2}");
                    var DescriptionerrObj4 = document.getElementById("{!$Component.myForm.Description2errMsg}");
                    if (fNameObj2.value.length == 0) {
                    fNameObj2.focus();
                    fNameObj2.scrollIntoView();
                    DescriptionerrObj4.innerHTML = "Please insert Description2."
                    return false;
                    }else{
                    DescriptionerrObj4.innerHTML = "";
                    }             
                    
                     var dateObj2 = document.getElementById("{!$Component.myForm.Date2}");
                    var DateerrObj5 = document.getElementById("{!$Component.myForm.Date2errMsg}");
                    if (dateObj2.value.length == 0) {
                    dateObj2.focus();
                    dateObj2.scrollIntoView();
                    DateerrObj5.innerHTML = "Please insert Date2."
                    return false;
                    }else{
                    DateerrObj5.innerHTML = "";
                    }
                   
                    var lNameObj2 = document.getElementById("{!$Component.myForm.outcome2}");
                    var outcomeerrObj6 = document.getElementById("{!$Component.myForm.outcome2errMsg}");
                    if (lNameObj2.value.length == 0) {
                    lNameObj2.focus();
                    lNameObj2.scrollIntoView();
                    outcomeerrObj6.innerHTML = "Please insert outcome2."
                    return false;
                    }else{
                    outcomeerrObj6.innerHTML = "";
                    }    
                    
                     var fNameObj3 = document.getElementById("{!$Component.myForm.Description3}");
                    var DescriptionerrObj7 = document.getElementById("{!$Component.myForm.Description3errMsg}");
                    if (fNameObj3.value.length == 0) {
                    fNameObj3.focus();
                    fNameObj3.scrollIntoView();
                    DescriptionerrObj7.innerHTML = "Please insert Description3."
                    return false;
                    }else{
                    DescriptionerrObj7.innerHTML = "";
                    }                       
                    
                   var dateObj3 = document.getElementById("{!$Component.myForm.Date3}");
                    var DateerrObj8 = document.getElementById("{!$Component.myForm.Date3errMsg}");
                    if (dateObj3.value.length == 0) {
                    dateObj3.focus();
                    dateObj3.scrollIntoView();
                    DateerrObj8.innerHTML = "Please insert Date3!!!"
                    return false;
                    }else{
                    DateerrObj8.innerHTML = "";
                    } 
                    
                    var lNameObj3 = document.getElementById("{!$Component.myForm.outcome3}");
                    var outcomeerrObj9 = document.getElementById("{!$Component.myForm.outcome3errMsg}");
                    if (lNameObj3.value.length == 0) {
                    lNameObj3.focus();
                    lNameObj3.scrollIntoView();
                    outcomeerrObj9.innerHTML = "Please insert outcome3."
                    return false;
                    }else{
                    outcomeerrObj9.innerHTML = "";
                    }     
                    
                    } catch (e) {
                    alert(e);
                    
                    return false;
                    } 


                // Change the button name - we use this to keep track of which step to display on a click

                document.getElementById('ButtonNext').name = 'Step4';

                document.getElementById('ButtonPrevious').name = 'Step2';

                document.getElementById('Step2').style.display = 'none';

                document.getElementById('Step3').style.display = '';

                // Change background color on header to highlight new step

                document.getElementById('HeaderTableStep3').style.backgroundColor = 'Yellow';

                document.getElementById('HeaderTableStep2').style.backgroundColor = 'Silver';
                document.location.href = '#top';
            }

            else if (document.getElementById('ButtonNext').name == 'Step4')

            {
                try {
                    var ENameObj = CKEDITOR.instances['{!$Component.myForm.ExpectedOutcome}'].getData();
                    var ExpectedOutcomeerrObj = document.getElementById("{!$Component.myForm.ExpectedOutcomeerrMsg}");
                    
                    if (ENameObj.replace(/<[^>]*>/gi, '').length === 0) {
                   
                    ExpectedOutcomeerrObj.innerHTML = "Please insert Expected Outcome."
                    return false;
                    }else{
                    ExpectedOutcomeerrObj.innerHTML = "";
                    }   
                        
                    var SNameObj = CKEDITOR.instances['{!$Component.myForm.Significance}'].getData();
                    var SignificanceerrObj = document.getElementById("{!$Component.myForm.SignificanceerrMsg}");
                   
                    if (SNameObj.replace(/<[^>]*>/gi, '').length === 0) {
                   
                    SignificanceerrObj.innerHTML = "Please insert Significance."
                    return false;
                    }else{
                    SignificanceerrObj.innerHTML = "";
                    }   
                   
                
                } catch (e) {
                alert(e);
                
               return false;
                }
                // Change the button name - we use this to keep track of which step to display on a click

                document.getElementById('ButtonNext').name = 'Step5';

                document.getElementById('ButtonPrevious').name = 'Step3';

                // Set new step to display and turn off display of current step

                document.getElementById('Step3').style.display = 'none';

                document.getElementById('Step4').style.display = '';

                // Change background color on header to highlight new step

                document.getElementById('HeaderTableStep4').style.backgroundColor = 'Yellow';

                document.getElementById('HeaderTableStep3').style.backgroundColor = 'Silver';
                document.location.href = '#top';
            }

            else if (document.getElementById('ButtonNext').name == 'Step5')

            {
            
         
Â              // Change the button name - we use this to keep track of which step to display on a click

                document.getElementById('ButtonNext').name = 'Step6';

                document.getElementById('ButtonPrevious').name = 'Step4';

               
                // Set new step to display and turn off display of current step

                document.getElementById('Step4').style.display = 'none';

                document.getElementById('Step5').style.display = '';

                // Change background color on header to highlight new step

                document.getElementById('HeaderTableStep5').style.backgroundColor = 'Yellow';

                document.getElementById('HeaderTableStep4').style.backgroundColor = 'Silver';
                document.location.href = '#top';
                // Load table elements for final review step

                

            }
            
            else if (document.getElementById('ButtonNext').name == 'Step6')

            {
             try {
            
            var itemObj = document.getElementById("{!$Component.myForm.item}");
            var itemerrObj = document.getElementById("{!$Component.myForm.itemerrMsg}");
            if (itemObj.value.length == 0) {
            itemObj.focus();
            itemObj.scrollIntoView();
            itemerrObj.innerHTML = "Please insert Item ."
            return false;
            }else{
            itemerrObj.innerHTML = "";
            } 
            
            var ExpenditureObj = document.getElementById("{!$Component.myForm.Expenditure}");
            var ExpenditureerrObj = document.getElementById("{!$Component.myForm.ExpenditureerrMsg}");
            if (ExpenditureObj.value.length == 1) {
            ExpenditureObj.focus();
            ExpenditureObj.scrollIntoView();
            ExpenditureerrObj.innerHTML = "Please insert Expenditure."
            return false;
            }else{
            ExpenditureerrObj.innerHTML = "";
            } 
            
            var PercentageObj = document.getElementById("{!$Component.myForm.Percentage}");
            var PercentageerrObj = document.getElementById("{!$Component.myForm.PercentageerrMsg}");
            if (PercentageObj.value.length == 0) {
            PercentageObj.focus();
            PercentageObj.scrollIntoView();
            PercentageerrObj.innerHTML = "Please insert Percentage."
            return false;
            }else{
            PercentageerrObj.innerHTML = "";
            } 
            
            var itemObj2 = document.getElementById("{!$Component.myForm.item2}");
            var itemerrObj2 = document.getElementById("{!$Component.myForm.item2errMsg}");
            if (itemObj2.value.length == 0) {
            itemObj2.focus();
            itemObj2.scrollIntoView();
            itemerrObj2.innerHTML = "Please insert Item2."
            return false;
            }else{
            itemerrObj2.innerHTML = "";
            } 
            
            var ExpenditureObj2 = document.getElementById("{!$Component.myForm.Expenditure2}");
            var ExpenditureerrObj2 = document.getElementById("{!$Component.myForm.Expenditure2errMsg}");
            if (ExpenditureObj2.value.length == 1) {
            ExpenditureObj2.focus();
            ExpenditureObj2.scrollIntoView();
            ExpenditureerrObj2.innerHTML = "Please insert Expenditure2."
            return false;
            }else{
            ExpenditureerrObj2.innerHTML = "";
            } 
            
            var PercentageObj2 = document.getElementById("{!$Component.myForm.Percentage2}");
            var PercentageerrObj2 = document.getElementById("{!$Component.myForm.Percentage2errMsg}");
            if (PercentageObj2.value.length == 0) {
            PercentageObj2.focus();
            PercentageObj2.scrollIntoView();
            PercentageerrObj2.innerHTML = "Please insert Percentage2."
            return false;
            }else{
            PercentageerrObj2.innerHTML = "";
            } 
            
            var itemObj3 = document.getElementById("{!$Component.myForm.item3}");
            var itemerrObj3 = document.getElementById("{!$Component.myForm.item3errMsg}");
            if (itemObj3.value.length == 0) {
            itemObj3.focus();
            itemObj3.scrollIntoView();
            itemerrObj3.innerHTML = "Please insert Item3."
            return false;
            }else{
            itemerrObj3.innerHTML = "";
            } 
            
            var ExpenditureObj3 = document.getElementById("{!$Component.myForm.Expenditure3}");
            var ExpenditureerrObj3 = document.getElementById("{!$Component.myForm.Expenditure3errMsg}");
            if (ExpenditureObj3.value.length == 1) {
            ExpenditureObj3.focus();
            ExpenditureObj3.scrollIntoView();
            ExpenditureerrObj3.innerHTML = "Please insert Expenditure3."
            return false;
            }else{
            ExpenditureerrObj3.innerHTML = "";
            } 
            
            var PercentageObj3 = document.getElementById("{!$Component.myForm.Percentage3}");
            var PercentageerrObj3 = document.getElementById("{!$Component.myForm.Percentage3errMsg}");
            if (PercentageObj3.value.length == 0) {
            PercentageObj3.focus();
            PercentageObj3.scrollIntoView();
            PercentageerrObj3.innerHTML = "Please insert Percentage3."
            return false;
            }else{
            PercentageerrObj3.innerHTML = "";
            }
            
            var SupportObj = document.getElementById("{!$Component.myForm.Support}");
            var SupporterrObj = document.getElementById("{!$Component.myForm.SupporterrMsg}");
            if (SupportObj.value.length == 0) {
            SupportObj.focus();
            SupportObj.scrollIntoView();
            SupporterrObj.innerHTML = "Please insert Support."
            return false;
            }else{
            SupporterrObj.innerHTML = "";
            } 
           
            
            
            if(SupportObj.value =='Yes'){
            //alert(SupportObj.value);
            var ids = document.getElementById('{!$Component.myForm.AgencySupportDetails}');
            var idserr = document.getElementById("{!$Component.myForm.AgencySupportDetailserrMsg}");
            if(ids.value.length ==0){
            //alert('Data submitted successfully');
            idserr.innerHTML = "Please insert Agency Support Details."
            return false;
            }
            else{
            idserr.innerHTML = "";
            }
            } 
            
            } catch (e) {
            alert(e);
            
            return false;
            }
            
                // Change the button name - we use this to keep track of which step to display on a click

                document.getElementById('ButtonNext').name = '';

                document.getElementById('ButtonPrevious').name = 'Step5';

                // Disable/enable buttons when reach reach start and review steps

                document.getElementById('ButtonNext').disabled = 'disabled';

                document.getElementById('SubmitFinal').disabled = '';

                // Set new step to display and turn off display of current step

                document.getElementById('Step5').style.display = 'none';

                document.getElementById('Step6').style.display = '';

                // Change background color on header to highlight new step

                document.getElementById('HeaderTableStep6').style.backgroundColor = 'Yellow';

                document.getElementById('HeaderTableStep5').style.backgroundColor = 'Silver';
              // Load table elements for final review step
               loadStep5Review();
               delayRedirect();
            }

            
               

        }

     <!------------------------Previous()------------------------------------------------------------->   

        // This function handles style and display changes for each previous button click

        function handleWizardPrevious()

        {

            if (document.getElementById('ButtonPrevious').name == 'Step1')

            {

                // Change the button name - we use this to keep track of which step to display on a click

                document.getElementById('ButtonNext').name = 'Step2';

                document.getElementById('ButtonPrevious').name = '';

                // Disable/enable buttons when reach reach start and review steps

                document.getElementById('ButtonPrevious').disabled = 'disabled';

                // Set new step to display and turn off display of current step

                document.getElementById('Step2').style.display = 'none';

                document.getElementById('Step1').style.display = '';

                // Change background color on header to highlight new step

                document.getElementById('HeaderTableStep1').style.backgroundColor = 'Yellow';

                document.getElementById('HeaderTableStep2').style.backgroundColor = 'Silver';

            }

            else if (document.getElementById('ButtonPrevious').name == 'Step2')

            {

                // Change the button name - we use this to keep track of which step to display on a click

                document.getElementById('ButtonNext').name = 'Step3';

                document.getElementById('ButtonPrevious').name = 'Step1';

                // Set new step to display and turn off display of current step

                document.getElementById('Step3').style.display = 'none';

                document.getElementById('Step2').style.display = '';

                // Change background color on header to highlight new step

                document.getElementById('HeaderTableStep2').style.backgroundColor = 'Yellow';

                document.getElementById('HeaderTableStep3').style.backgroundColor = 'Silver';

            }

            else if (document.getElementById('ButtonPrevious').name == 'Step3')

            {

                // Change the button name - we use this to keep track of which step to display on a click

                document.getElementById('ButtonNext').name = 'Step4';

                document.getElementById('ButtonPrevious').name = 'Step2';

                // Set new step to display and turn off display of current step

                document.getElementById('Step4').style.display = 'none';

                document.getElementById('Step3').style.display = '';

                // Change background color on header to highlight new step

                document.getElementById('HeaderTableStep3').style.backgroundColor = 'Yellow';

                document.getElementById('HeaderTableStep4').style.backgroundColor = 'Silver';

            }

            else if (document.getElementById('ButtonPrevious').name == 'Step4')

            {

                // Change the button name - we use this to keep track of which step to display on a click

                document.getElementById('ButtonNext').name = 'Step5';

                document.getElementById('ButtonPrevious').name = 'Step3';

                // Set new step to display and turn off display of current step

                document.getElementById('Step5').style.display = 'none';

                document.getElementById('Step4').style.display = '';

                // Change background color on header to highlight new step

                document.getElementById('HeaderTableStep4').style.backgroundColor = 'Yellow';

                document.getElementById('HeaderTableStep5').style.backgroundColor = 'Silver';

            }
            
            else if (document.getElementById('ButtonPrevious').name == 'Step5')

            {

                // Change the button name - we use this to keep track of which step to display on a click

                document.getElementById('ButtonNext').name = 'Step6';

                document.getElementById('ButtonPrevious').name = 'Step4';

                // Disable/enable buttons when reach reach start and review steps

                document.getElementById('ButtonNext').disabled = '';

                document.getElementById('SubmitFinal').disabled = 'disabled';

                // Set new step to display and turn off display of current step

                document.getElementById('Step6').style.display = 'none';

                document.getElementById('Step5').style.display = '';

                // Change background color on header to highlight new step

                document.getElementById('HeaderTableStep5').style.backgroundColor = 'Yellow';

                document.getElementById('HeaderTableStep6').style.backgroundColor = 'Silver';

            }


        }

    </script>
    <!------when the click the finesh button to call the validaton--------->
        
     <!--https://sweetalert2.github.io/ popup plugin---->
 <apex:includeScript value="https://cdn.jsdelivr.net/npm/sweetalert2"/>
  
<style>
.form-control-label{
        margin-top:5px;
        }
        .loadingBG{
        position: fixed;
        top: 0; 
        left: 0;
        right: 0; 
        bottom: 0; 
        opacity: 0.5; 
        z-index: 1000; 
        background-color:#084d89;
        }
        .loadingBGP{
        position: fixed; 
        left: 0; top: 0; 
        bottom: 0; 
        right: 0; 
        z-index: 1001; 
        margin: 15% 50%;        
        } 
        .lookupInput a{
        position: absolute;
        width: 33px !important; 
        margin-left: 5px;
        background-image: url(/img/setup/search-icon.png) !important;
        background-repeat: no-repeat !important;
        background-position: center !important;
        display: inline-flex !important;
        }
        .lookupInput a img{
        display:none !important;
        }
        .hideComponent{
        display:none;
        }

div.hideCurrDate span.dateInput span.dateFormat{
           display:none;
        }
 .label{
     display                 : block;
    
     margin:10px 5px;
     float:left;
     list-style:none;
    
     border-top-left-radius  : 4px;
     border-top-right-radius : 4px;
     box-shadow              : 0 0 0.5em        rgba(0,0,0,0.0625);
     background              : #fff;
     -moz-user-select : none;
     -ms-user-select : none;
     -webkit-user-select : none;
      
 }  
  .slds-scope td, .slds-scope th {
     padding: 15px; 
     padding-left : 3em;
     padding-right : 3em;
     margin        : 1.6em 0 0 0.6%;
}
 #customers  {
    padding-top: 12px;
    padding-bottom: 12px;
    text-align: left;
    background-color: white;
    color: black;
    font-size: 16px;
     margin : -1.4em 0 0 0.2%;
    }
    .hideComponent{
        display:none;
        }
    .redFont {
      color: red;
    }
</style>
<!--------ckeditor- start----------------->
 <apex:includeScript value="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"/>
<script src="//cdn.ckeditor.com/4.6.0/standard/ckeditor.js"></script>

 <script type="text/javascript">
        $j = jQuery.noConflict();
        function reloadCKEditor(){                       
            //ckeditor library does the trick by calling this method. 
            //It takes as parameter a string representing the style class to reach for, in order to enable our text area to be really #rich!                                                 
            CKEDITOR.replaceAll('ckeditor');    
        }
        function loadStep5Review(){
            //here we assign to our hidden textarea the value of the visible one  
            $j("[id$='hidden_text_area_field']").val(CKEDITOR.instances[$j("[id$='BackgroundScope']").attr('id')].getData()); 
            $j("[id$='hidden_text_area_field1']").val(CKEDITOR.instances[$j("[id$='ResearchQuestions']").attr('id')].getData()); 
            $j("[id$='hidden_text_area_field2']").val(CKEDITOR.instances[$j("[id$='BriefReview']").attr('id')].getData()); 
            $j("[id$='hidden_text_area_field3']").val(CKEDITOR.instances[$j("[id$='Methodology']").attr('id')].getData());
            $j("[id$='hidden_text_area_field4']").val(CKEDITOR.instances[$j("[id$='ExpectedOutcome']").attr('id')].getData());
            $j("[id$='hidden_text_area_field5']").val(CKEDITOR.instances[$j("[id$='Significance']").attr('id')].getData());
            $j("[id$='hidden_text_area_field6']").val(CKEDITOR.instances[$j("[id$='Collaboration']").attr('id')].getData());                         
        }       
    </script>   

        <script type="text/javascript">
        $j = jQuery.noConflict();
        $j(function(){
        reloadCKEditor();
        })
        </script> 
        <!------adding new -----
            // at the bottom of the page add the script to update CK editor
            <script src="/ckeditor/ckeditor-3.6.2/ckeditor.js?t=3.6.2.3" type="text/javascript"/>
            
            // ckeditor replace with options
            <script>CKEDITOR.timestamp = '3.6.2.1';
            var prototocolAndHost = window.location.protocol + '//' + window.location.host;
            var editor = CKEDITOR.replace('{!$Component.myForm.BriefReview}', {baseHref : prototocolAndHost + '/ckeditor/ckeditor-3.6.2/', customConfig : '/ckeditor/ckeditor-3.6.2/ckeditor.config.js', height : '425', bodyId : 'articleEdit:createDocumentForm:sectionRepeat:0:fieldRepeat:0:fieldName:textAreaDelegate_00NG0000009Thtt_rta_body', toolbar : 'Full', sharedSpaces : { top : 'cke_topSpace', bottom : ' cke_bottomSpace' }, filebrowserImageUploadUrl : '/_ui/common/request/servlet/RtaImageUploadServlet', contentsCss : ['/sCSS/27.0/sprites/1362621144000/Theme3/default/gc/ArticleHtmlDetailElem.css'], disableNativeSpellChecker : false,language : 'en-us',sfdcLabels : { CkeMediaEmbed : { title : 'Embed Multimedia Content', description : 'Use &lt;iframe&gt; code from DailyMotion, Vimeo, and Youtube.', subtitle : 'Paste &amp;lt;iframe&amp;gt; code here:', exampleTitle : 'Example:', example : '\n            \n                &lt;iframe width=\&quot;560\&quot; height=\&quot;315\&quot; src=\&quot;https://www.youtube.com/embed/KcOm0TNvKBA\&quot; frameborder=\&quot;0\&quot; allowfullscreen&gt;&lt;/iframe&gt;\n            \n        ', iframeMissing : 'Invalid &lt;iframe&gt; element. Please use valid code from the approved sites.'}, sfdcSwitchToText : { sfdcSwitchToTextAlt : 'Use plain text'}, CkeImageDialog : { uploadTab : 'Upload Image', infoTab_url : 'URL', error : 'Error:', uploadTab_desc_info : 'Enter a description of the image for visually impaired users', uploadTab_desc : 'Description', infoTab_url_info : 'Example: http://www.mysite.com/myimage.jpg', btn_insert : 'Insert', missingUrlError : 'You must enter a URL', uploadTab_file : 'Select Image', infoTab_desc : 'Description', btn_upadte : 'Update', wrongFileTypeError : 'You can insert only .gif .jpeg and .png files.', infoTab : 'Web Address', title : 'Insert Image', infoTab_desc_info : 'Enter a description of the image for visually impaired users', uploadTab_file_info : 'Maximum size 1 MB. Only png, gif or jpeg'}, CkeImagePaste : { CkeImagePasteWarning : 'Pasting an image is not working properly with Firefox, please use [Copy Image location] instead.'}}});
            </script> --->
        
        
        
        
<!--------ckeditor- end----------------->
</head>

<body>
<apex:form html-autocomplete="off" id="myForm">
            <!-- Left Panel -->
           <aside id="left-panel" class="left-panel">
                <c:Flame_SideMenuBar />
            </aside>
            <!-- Left Panel -->            
            <!-- Right Panel -->            
           <div id="right-panel" class="right-panel">                
                <!-- Header-->
                <c:Flame_HeaderBar />
                <!-- Header-->                                
                <!--Main container -->  
               <div class="content mt-3">                                                         
                    <div class="col-lg-12"> 
                        <div class="sub-heading">
                            <h6>Research Grant</h6>
                        </div>
                        
              <!--     <div class="assist-content-area">  -->
                    <div class="services-content" > 
 <div class="col-lg-12"> 
             <table class="table table-striped table-bordered table-sm table-list" cellspacing="0" width="100%">
              <tbody>
                                   
              <tr>
              <td>
              <label class="slds-form-element__label" >Project Name</label> 
              <div>
              <apex:inputField value="{!Researchobj.Title_of_publication__c}" styleClass="slds-input" id="ProjectName"/>
              </div><div>
                <apex:outputLabel styleClass="redFont" id="ProjectNameerrMsg"></apex:outputLabel>
               </div>
              </td>
              <td>
              <label class="slds-form-element__label" >Principal Faculty</label>
              <div> 
              <apex:inputField value="{!userContact.Name}" styleClass="slds-input" id="principalFaculty"/>
              </div><div>
              <apex:outputLabel styleClass="redFont" id="principalFacultyerrMsg"></apex:outputLabel>
              </div>
              </td>
              
              </tr>
              <tr>
              <td></td>
              <td>
              <label class="slds-form-element__label" >Department</label>
              <div> 
              <apex:inputText value="{!userContact.Department__c}" styleClass="slds-input" id="Area" disabled="{!(!flag)}"/>
              </div><div>
              <apex:outputLabel styleClass="redFont" id="AreaerrMsg"></apex:outputLabel>
             </div>
              </td>
              </tr>
               <tr>
               <td></td>
                <td> <label class="slds-form-element__label" >Application Date</label> 
                <div class="hideCurrDate"> 
                <apex:inputField value="{!Researchobj.Application_Date__c}" styleClass="slds-input" id="ApplicationDate"  html-disabled="true" />
                
                </div><div>
                <apex:outputLabel styleClass="redFont" id="ApplicationDateerrMsg"></apex:outputLabel>
                </div>
                </td>
               
             
               </tr>
             
              </tbody>
             </table>               
   </div>
   <!-------To fetch the todays date on the application ----------------->
        <script>
        var date = new Date();
        
        var day = date.getDate();
        var month = date.getMonth() + 1;
        var year = date.getFullYear();
        
      //  if (month < 10) month = "0" + month;
     //   if (day < 10) day = "0" + day;
        
        var today = day + "/" + month + "/" + year;
        
       
        document.getElementById("{!$Component.myForm.ApplicationDate}").value = today; 
        </script>
 <!--------html tabs start------------------>
   <br/>
<form class="steps" accept-charset="UTF-8" enctype="multipart/form-data" novalidate="">
    <table border="0" cellpadding="5" cellspacing="0" id="HeaderTable" style="margin-left:20px;">

        <tr >

            <td id="HeaderTableStep1" style="background-color:Yellow;" class="label">

               <i class="fa fa-codepen"></i> Scope </td>

            <td id="HeaderTableStep2" style="background-color:Silver" class="label">

               <i class="fa fa-dribbble"></i> Milestones</td>

            <td id="HeaderTableStep3" style="background-color:Silver" class="label">

               <i class="fa fa-stack-overflow"></i> Deliverables</td>

            <td id="HeaderTableStep4" style="background-color:Silver" class="label">

              <i class="fa fa-bitbucket"></i> Collaboration</td>

            <td id="HeaderTableStep5" style="background-color:Silver" class="label">

              <i class="fa fa-credit-card"></i> Funding</td>
                
            <td id="HeaderTableStep6" style="background-color:Silver" class="label">

              <i class="fa fa-briefcase"></i> Undertaking</td>

        </tr>

    </table>
</form>
    <br />
  <div style=" background: #fff;box-shadow : 0 0 0.5em rgba(0,0,0,0.0625);border-radius : 4px;border: 1px solid #ddd;padding: 0.5em 0.75em; margin: -1.7em 0 0 -100%;width : 100%;box-sizing: border-box;float: right;z-index : 1;">
 <br />
<!------step-1---------->
 <span id="Step1" >

<table border="0" id="customers" >
        <tr class="sub-heading">
        <th><h6>Scope</h6></th>
        </tr>
        
        <tr>
        <td>
        <label class="slds-form-element__label" >Background and Scope of project</label>
        <div> 
                    
                  <apex:inputTextArea id="BackgroundScope"
                                         value="{!Researchobj.Background_Scope__c}"                                     
                                         richtext="false" 
                                         styleClass="ckeditor"/>
                                         
       <apex:inputHidden id="hidden_text_area_field" value="{!Researchobj.Background_Scope__c}"/>
        
        </div><div>
        <apex:outputLabel styleClass="redFont" id="BackgroundScopeerrMsg"></apex:outputLabel>
        </div>
        </td>
        </tr>
        
        <tr>
        <td>
        <label class="slds-form-element__label" >Statement of Problem/Research Questions</label>
        <div>
           <apex:inputTextArea id="ResearchQuestions"
                                         value="{!Researchobj.Research_Questions__c}"                                     
                                         richtext="false" 
                                         styleClass="ckeditor"/>
        <apex:inputHidden id="hidden_text_area_field1"  value="{!Researchobj.Research_Questions__c}" /> 
        
        </div><div>
        <apex:outputLabel styleClass="redFont" id="ResearchQuestionserrMsg"></apex:outputLabel>
        </div>
        </td>
        </tr>
        
        <tr>
        <td>
        <label class="slds-form-element__label" >Brief Literature Review</label>
        <div>
        <apex:inputTextArea id="BriefReview" 
                                         value="{!Researchobj.Brief_Review__c}"                                     
                                         richtext="false" 
                                         styleClass="ckeditor"/>
                                         
       <apex:inputHidden id="hidden_text_area_field2" value="{!Researchobj.Brief_Review__c}"/> 
        </div><div>
        <apex:outputLabel styleClass="redFont" id="BriefReviewerrMsg"></apex:outputLabel>
        </div>
        </td> 
        </tr>
        
        <tr>
        <td>
        <label class="slds-form-element__label" >Methodology</label>
        <div>
         <apex:inputTextArea id="Methodology"
                                        value="{!Researchobj.Methodology__c}"                                     
                                         richtext="false" 
                                         styleClass="ckeditor"/>
                                         
       <apex:inputHidden id="hidden_text_area_field3" value="{!Researchobj.Methodology__c}"/>  
        </div><div>
        <apex:outputLabel styleClass="redFont" id="MethodologyerrMsg"></apex:outputLabel>
        </div>
        </td> 
        
        </tr>
        
        
        </table>
             
</span>
<!---------step-2--------------------->
 <span id="Step2" style="display:none">

<div class="table-responsive">   
    <div class="sub-heading"><h6>Milestones</h6> </div>                                
                                    <table id="contacttable" class="table table-striped table-bordered table-sm table-list" cellspacing="0" width="100%">
                                        <thead>
                                            <tr >
                                                <th style="font-size: 15px;"> S.No</th>
                                                <th style="font-size: 15px;">Milestone Description</th>
                                                <th style="font-size: 15px;">Expected Completion Date</th>
                                                <th style="font-size: 15px;">Expected Outcome</th>
                                                                               
                                            </tr>
                                        </thead>
                                        
                                        <tbody>
                                            <tr>
                                            <td>   <label class="slds-form-element__label" > 1 </label></td>
                                            <td>  <div>
                                                   <apex:inputField value="{!Researchobj.Milestone_1_Description__c}" styleClass="slds-input " id="Description1"/>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="Description1errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                            <td> <div>
                                                   <div class="hideCurrDate">  
                                                  <apex:inputField styleClass="slds-input" value="{!Researchobj.Milestone_1_Exp_Comp_Date__c}" id="Date1"/></div> 
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="Date1errMsg"></apex:outputLabel>
                                                   </div>
                                                   
                                                   
                                                   </td>
                                            <td>   <div>
                                                   <apex:inputField value="{!Researchobj.Milestone_1_Outcome__c}" styleClass="slds-input" id="outcome1"/>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="outcome1errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                            </tr>
                                            <tr>
                                            <td>   <label class="slds-form-element__label" > 2 </label></td>
                                            <td>  <div>
                                                   <apex:inputField value="{!Researchobj.Milestone_2_Description__c}" styleClass="slds-input" id="Description2"/>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="Description2errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                            <td> 
                                                    <div>
                                                   <div class="hideCurrDate">  
                                                   
                                                   <apex:inputField styleClass="slds-input" value="{!Researchobj.Milestone_2_Exp_Comp_Date__c}"  id="Date2"/></div>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="Date2errMsg"></apex:outputLabel>
                                                   </div>
                                                    </td>
                                            <td>  <div>
                                                   <apex:inputField value="{!Researchobj.Milestone_2_Outcome__c}" styleClass="slds-input" id="outcome2"/>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="outcome2errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                            </tr>
                                            <tr>
                                            <td>   <label class="slds-form-element__label" > 3 </label></td>
                                            <td>  <div>
                                                   <apex:inputField value="{!Researchobj.Milestone_3_Description__c}" styleClass="slds-input" id="Description3"/>
                                                   </div><div>
                                                    <apex:outputLabel styleClass="redFont" id="Description3errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                            <td> 
                                                   <div>
                                                   <div class="hideCurrDate">  
                                                  
                                                   <apex:inputField styleClass="slds-input" value="{!Researchobj.Milestone_3_Exp_Comp_Date__c}" id="Date3"/></div>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="Date3errMsg"></apex:outputLabel>
                                                   </div>
                                                    </td>
                                            <td>  <div>
                                                   <apex:inputField value="{!Researchobj.Milestone_3_Outcome__c}" styleClass="slds-input"  id="outcome3"/>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="outcome3errMsg"></apex:outputLabel>
                                                   </div>
                                                   
                                                   </td>
                                            </tr>
                                            <tr>
                                            <td>   <label class="slds-form-element__label" > 4 </label></td>
                                            <td>   <div>
                                                   <apex:inputField value="{!Researchobj.Milestone_4_Description__c}" styleClass="slds-input" id="Description4"/>
                                                   </div><div>
                                                    <apex:outputLabel styleClass="redFont" id="Description4errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                            <td> 
                                                   <div>
                                                   <div class="hideCurrDate">  
                                                  
                                                   <apex:inputField styleClass="slds-input" value="{!Researchobj.Milestone_4_Exp_Comp_Date__c}" id="Date4"/></div>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="Date4errMsg"></apex:outputLabel>
                                                   </div>
                                                   
                                                    </td>
                                            <td>  <div>
                                                   <apex:inputField value="{!Researchobj.Milestone_4_Outcome__c}" styleClass="slds-input" id="outcome4"/>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="outcome4errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                            </tr>
                                            <tr>
                                            <td>   <label class="slds-form-element__label" > 5 </label></td>
                                            <td>   <div>
                                                   <apex:inputField value="{!Researchobj.Milestone_5_Description__c}" styleClass="slds-input" id="Description5"/>
                                                   </div><div>
                                                    <apex:outputLabel styleClass="redFont" id="Description5errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                           <td> 
                                                   <div>
                                                   <div class="hideCurrDate">  
                                                  
                                                   <apex:inputField styleClass="slds-input" value="{!Researchobj.Milestone_5_Exp_Comp_Date__c}" id="Date5"/></div>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="Date5errMsg"></apex:outputLabel>
                                                   </div>
                                                    </td>
                                            <td>  <div>
                                                   <apex:inputField value="{!Researchobj.Milestone_5_Outcome__c}" styleClass="slds-input" id="outcome5"/>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="outcome5errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                            </tr>
                                            <tr>
                                            <td>   <label class="slds-form-element__label" > 6 </label></td>
                                            <td>   <div>
                                                   <apex:inputField value="{!Researchobj.Milestone_6_Description__c}" styleClass="slds-input" id="Description6"/>
                                                   </div><div>
                                                    <apex:outputLabel styleClass="redFont" id="Description6errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                            <td> 
                                                  <div>
                                                   <div class="hideCurrDate">  
                                                  
                                                   <apex:inputField styleClass="slds-input" value="{!Researchobj.Milestone_6_Exp_Comp_Date__c}" id="Date6"/></div>
                                                   
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="Date6errMsg"></apex:outputLabel>
                                                   </div>
                                                    </td>
                                            <td>  <div>
                                                   <apex:inputField value="{!Researchobj.Milestone_6_Outcome__c}" styleClass="slds-input" id="outcome6"/>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="outcome6errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                            </tr>
                                            <tr>
                                            <td>   <label class="slds-form-element__label" > 7 </label></td>
                                            <td>  <div>
                                                   <apex:inputField value="{!Researchobj.Milestone_7_Description__c}" styleClass="slds-input" id="Description7"/>
                                                  </div><div>
                                                    <apex:outputLabel styleClass="redFont" id="Description7errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                            <td> 
                                                   
                                                   <div>
                                                   <div class="hideCurrDate">  
                                                 
                                                   <apex:inputField styleClass="slds-input" value="{!Researchobj.Milestone_7_Exp_Comp_Date__c}" id="Date7"/></div> 
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="Date7errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                            <td>  <div>
                                                   <apex:inputField value="{!Researchobj.Milestone_7_Outcome__c}" styleClass="slds-input" id="outcome7"/>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="outcome7errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                            </tr>   
                                            
                                        </tbody>
                                    </table>  
                                    
                                </div> 
   

</span>
<!----------step-3----------------->
 
 <span id="Step3" style="display:none" >

<div>
        <table border="0" id="customers" >
        <tr class="sub-heading">
        <th><h6>Deliverables</h6></th>
        </tr>
        
        <tr>
        <td>
        <label class="slds-form-element__label" >Expected outcome/Deliverable of the proposed research project: Research Papers/ Publication in Journal (Tentative Names)/ Book/ Book Chapter</label> 
        <div>
        <apex:inputTextArea id="ExpectedOutcome" 
                                         value="{!Researchobj.Expected_Outcome__c}"                                     
                                         richtext="false" 
                                         styleClass="ckeditor"/>
                                         
       <apex:inputHidden id="hidden_text_area_field4" value="{!Researchobj.Expected_Outcome__c}"/>
       
        </div><div>
        <apex:outputLabel styleClass="redFont" id="ExpectedOutcomeerrMsg"></apex:outputLabel>
        </div>
        </td>
        </tr>
        <tr>
        <td>
        <label class="slds-form-element__label" >Significance/Utility of the Study</label> 
        <div>
        
        <apex:inputTextArea id="Significance" 
                                         value="{!Researchobj.Significance__c}"                                     
                                         richtext="false" 
                                         styleClass="ckeditor"/>
                                         
       <apex:inputHidden id="hidden_text_area_field5" value="{!Researchobj.Significance__c}"/>
      
        </div><div>
        <apex:outputLabel styleClass="redFont" id="SignificanceerrMsg"></apex:outputLabel>
        </div>
        </td>
        </tr>
        </table>
        
      
        </div>

         

</span>

<!----------step-4----------------------->
 <span id="Step4" style="display:none">

  <div > 
   
        <table border="0" id="customers" >
        <tr class="sub-heading">
        <th><h6>Collaboration</h6></th>
        </tr>
        <tr>
        <td>
        <label class="slds-form-element__label" >Details of collaboration, if any, intended: a. Technical b. Academic c. Financial (Brief description)</label> 
        <div >
        <apex:inputTextArea id="Collaboration" 
                                         value="{!Researchobj.Collaboration_Details__c}"                                    
                                         richtext="false" 
                                         styleClass="ckeditor" />
                                         
       <apex:inputHidden id="hidden_text_area_field6" value="{!Researchobj.Collaboration_Details__c}" />
       
        </div><div>
        <apex:outputLabel styleClass="redFont" id="CollaborationerrMsg" escape="false"></apex:outputLabel>
        </div>
        </td>
        </tr>
       </table>
     
        </div>   
               
</span>
<!------------step-5------------------------>
 <span id="Step5" style="display:none">

 <div class="table-responsive">   
                           <div class="sub-heading"><h6>Funding</h6> </div>
                                                   
                                    <table id="contacttable" class="table table-striped table-bordered table-sm table-list" cellspacing="0" width="100%">
                                        
                                        <thead>
                                     
                                            <tr >
                                                <th style="font-size: 15px;"> S.No</th>
                                                <th style="font-size: 15px;">Financial Assistance Item</th>
                                                <th style="font-size: 15px;"> Item Expected Expenditure</th>
                                                <th style="font-size: 15px;"> Item % of Total Expenditure</th>
                                                                               
                                            </tr>
                                        </thead>
                                        
                                        <tbody>
                                            <tr>
                                            <td>   <label class="slds-form-element__label" > 1 </label></td>
                                            <td> 
                                            <div>
                                                    <apex:inputField value="{!Researchobj.Financial_Assistance_Item_1__c}" styleClass="slds-input" id="item" html-placeholder="FinancialAssistanceItem-3"/>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="itemerrMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                            
                                            <td> 
                                            <div>
                                                   <apex:inputField value="{!Researchobj.FA_Item_1_Expenditure__c}" styleClass="slds-input" id="Expenditure" onkeypress="return isNumberKey(event)" onchange="calculate()"/>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="ExpenditureerrMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                                   
                                                    <td>
                                                     <div>
                                                   <apex:inputField value="{!Researchobj.FA_Item_1_Percentage_Expenditure__c}" styleClass="slds-input" id="Percentage" onkeypress="return isNumberKey(event)" onclick="calculate()" html-disabled="true"/>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="PercentageerrMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                            </tr>
                                           
                                           <tr>
                                           <td>   <label class="slds-form-element__label" > 2 </label></td>
                                            <td> 
                                            <div>
                                                 
                                                  <apex:inputField value="{!Researchobj.Financial_Assistance_Item_2__c}" styleClass="slds-input" id="item2" html-placeholder="FinancialAssistanceItem-3"/>
                                                    
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="item2errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                            
                                            <td> 
                                            <div>
                                                   <apex:inputField value="{!Researchobj.FA_Item_2_Expenditure__c}" styleClass="slds-input" id="Expenditure2" onkeypress="return isNumberKey(event)" onchange="calculate()"/>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="Expenditure2errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                                   
                                                    <td>
                                                    <div>  
                                                   <apex:inputField value="{!Researchobj.FA_Item_2_Percentage_Expenditure__c}" styleClass="slds-input" id="Percentage2" onkeypress="return isNumberKey(event)" onclick="calculate()" html-disabled="true"/>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="Percentage2errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                            </tr>
                                            
                                            <tr>
                                            <td>   <label class="slds-form-element__label" > 3 </label></td>
                                            <td>  
                                            <div>
                                                   <apex:inputField value="{!Researchobj.Financial_Assistance_Item_3__c}" styleClass="slds-input" id="item3" html-placeholder="FinancialAssistanceItem-3"/>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="item3errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                            
                                            <td> 
                                            <div>
                                                   <apex:inputField value="{!Researchobj.FA_Item_3_Expenditure__c}" styleClass="slds-input" id="Expenditure3" onkeypress="return isNumberKey(event)" onchange="calculate()"/>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="Expenditure3errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                                   
                                                    <td> 
                                                    <div> 
                                                   <apex:inputField value="{!Researchobj.FA_Item_3_Percentage_Expenditure__c}" styleClass="slds-input" id="Percentage3" onkeypress="return isNumberKey(event)" onclick="calculate()" html-disabled="true"/>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="Percentage3errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                            </tr>
                                            
                                            <tr>
                                            <td>   <label class="slds-form-element__label" > 4 </label></td>
                                            <td>  
                                            <div>
                                                   <apex:inputField value="{!Researchobj.Financial_Assistance_Item_4__c}" styleClass="slds-input" id="item4" html-placeholder="FinancialAssistanceItem-4"/>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="item4errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                            
                                            <td> 
                                            <div>
                                                   <apex:inputField value="{!Researchobj.FA_Item_4_Expenditure__c}" styleClass="slds-input" id="Expenditure4" onkeypress="return isNumberKey(event)" onchange="calculate()"/>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="Expenditure4errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                                   
                                                    <td> 
                                                    <div> 
                                                   <apex:inputField value="{!Researchobj.FA_Item_4_Percentage_Expenditure__c}" styleClass="slds-input" id="Percentage4" onkeypress="return isNumberKey(event)" onclick="calculate()" html-disabled="true"/>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="Percentage4errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                            </tr>
                                            
                                            <tr>
                                            <td>   <label class="slds-form-element__label" > 5 </label></td>
                                            <td>  
                                            <div>
                                                   <apex:inputField value="{!Researchobj.Financial_Assistance_Item_5__c}" styleClass="slds-input" id="item5" html-placeholder="FinancialAssistanceItem-5"/>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="item5errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                            
                                            <td>  
                                            <div>
                                                   <apex:inputField value="{!Researchobj.FA_Item_5_Expenditure__c}" styleClass="slds-input" id="Expenditure5" onkeypress="return isNumberKey(event)" onchange="calculate()"/>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="Expenditure5errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                                   
                                                    <td>  
                                                    <div>
                                                   <apex:inputField value="{!Researchobj.FA_Item_5_Percentage_Expenditure__c}" styleClass="slds-input" id="Percentage5" onkeypress="return isNumberKey(event)" onclick="calculate()" html-disabled="true"/>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="Percentage5errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                            </tr>
                                            
                                            
                                            <tr>
                                            <td>   <label class="slds-form-element__label" > 6 </label></td>
                                            <td>   
                                            <div>
                                                   <apex:inputField value="{!Researchobj.Financial_Assistance_Item_6__c}" styleClass="slds-input" id="item6" html-placeholder="FinancialAssistanceItem-6"/>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="item6errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                            
                                            <td>  
                                            <div> 
                                                   <apex:inputField value="{!Researchobj.FA_Item_6_Expenditure__c}" styleClass="slds-input" id="Expenditure6" onkeypress="return isNumberKey(event)" onchange="calculate()"/>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="Expenditure6errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                                   
                                                    <td> 
                                                    <div> 
                                                   <apex:inputField value="{!Researchobj.FA_Item_6_Percentage_Expenditure__c}" styleClass="slds-input" id="Percentage6" onkeypress="return isNumberKey(event)" onclick="calculate()" html-disabled="true"/>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="Percentage6errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                            </tr>
                                            
                                            <tr>
                                            <td>   <label class="slds-form-element__label" > 7 </label></td>
                                            <td>  
                                            <div>
                                                   <apex:inputField value="{!Researchobj.Financial_Assistance_Item_7__c}" styleClass="slds-input" id="item7" html-placeholder="FinancialAssistanceItem-7"/>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="item7errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                            
                                            <td>   
                                            <div>
                                                   <apex:inputField value="{!Researchobj.FA_Item_7_Expenditure__c}" styleClass="slds-input" id="Expenditure7" onkeypress="return isNumberKey(event)" onchange="calculate()"/>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="Expenditure7errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                                   
                                                    <td> 
                                                    <div>  
                                                   <apex:inputField value="{!Researchobj.FA_Item_7_Percentage_Expenditure__c}" styleClass="slds-input" id="Percentage7" onkeypress="return isNumberKey(event)" onclick="calculate()" html-disabled="true"/>
                                                   </div><div>
                                                   <apex:outputLabel styleClass="redFont" id="Percentage7errMsg"></apex:outputLabel>
                                                   </div>
                                                   </td>
                                            </tr>
                                           <tr>
                                           <td></td>
                                           <td> <label class="slds-form-element__label" >Total Estimated Cost of Project</label></td>
                                           <td>  <apex:inputField value="{!Researchobj.Total_Cost__c}" styleClass="slds-input" id="result" html-disabled="true" /></td>
                                           <td>  <apex:inputText styleClass="slds-input" id="result1" disabled="{!(!flag)}" /></td>
                                           </tr>
                                        </tbody>
                                          
                                           
                                    </table>  
                                    
                                    <div class="col-lg-12" >
                                    <div class="slds-form-element" id="comp3">
                                    <label class="slds-form-element__label" >Has the researcher received support for the research project from any agency? </label>
                                    <div>
                                    <div class="slds-form-element__control"  >                                    
                                    <apex:inputField styleClass="slds-input" value="{!Researchobj.Agency_Support__c}" onclick="showHideEle(this)" id="Support" />
                                    </div>
                                    </div>
                                    <div>
                                    <apex:outputLabel styleClass="redFont" id="SupporterrMsg"></apex:outputLabel>
                                    </div>
                                    </div>
                                    
                                    <div class="slds-form-element hideComponent"  id="subCategoryCls" >
                                    <label class="slds-form-element__label" >If YES, please provide details. </label>
                                    <div class="slds-form-element__control"  >                                    
                                    <apex:inputField styleClass="slds-input" value="{!Researchobj.Agency_Support_Details__c}" id="AgencySupportDetails"/>
                                    </div>
                                    </div>
                                    <apex:outputLabel styleClass="redFont" id="AgencySupportDetailserrMsg"></apex:outputLabel>
                                    </div>
                                    <br/>  <br/>
                                    
                                </div> 
                                
                                <script type="text/javascript">
                                
                                function showHideEle(ele){
                                var value = $(ele).val();
                                if(value=='Yes'){
                                $('#subCategoryCls').show();
                                
                                }else{
                                $('#subCategoryCls').hide();
                                }                       
                                }
                                
                                function isNumberKey(evt)
                                {
                                var charCode = (evt.which) ? evt.which : evt.keyCode;
                                if (charCode != 46 && charCode > 31 
                                && (charCode < 48 || charCode > 57))
                                return false;
                                
                                return true;
                                }
                               
         
                                </script>
                            <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
                                <script>
                               
                                var calculate = function() {
                               
                                var val1 = $('[id$=Expenditure]').val();
                                val1= val1.replace(/\,/g,'');
                                var val2 = $('[id$=Expenditure2]').val();
                                val2 = val2.replace(/\,/g,'');
                                var val3 = $('[id$=Expenditure3]').val();
                                val3 = val3.replace(/\,/g,'');
                                var val4 = $('[id$=Expenditure4]').val();
                                val4 = val4.replace(/\,/g,'');
                                var val5 = $('[id$=Expenditure5]').val();
                                val5= val5.replace(/\,/g,'');
                                var val6 = $('[id$=Expenditure6]').val();
                                val6 = val6.replace(/\,/g,'');
                                var val7 = $('[id$=Expenditure7]').val();
                                val7 = val7.replace(/\,/g,'');
                                
                                var val8  = $('[id$=Percentage]').val();
                                var val9  = $('[id$=Percentage2]').val();
                                var val10 = $('[id$=Percentage3]').val();
                                var val11 = $('[id$=Percentage4]').val();
                                var val12 = $('[id$=Percentage5]').val();
                                var val13 = $('[id$=Percentage6]').val();
                                var val14 = $('[id$=Percentage7]').val();
                                
                                
                                
                                var total = parseFloat( val1 ) + parseFloat( val2 ) + parseFloat( val3 )+ parseFloat( val4 )+ parseFloat( val5 )+ parseFloat( val6 )+ parseFloat( val7 );
                               
                                //The isNaN() function determines whether a value is an illegal number (Not-a-Number)
                                if( !isNaN( total ) ) {
                                $( "[id$=result]" ).val(total );
                                }
                                var val15 = $( "[id$=result]" ).val();
                                
                                var val16 = (val1/val15);
                                var val17 = (val16* 100).toFixed(2);
                                 if( !isNaN( val17) ) {
                                 $( "[id$=Percentage]" ).val( val17 );
                                  }
                                
                                  
                                 var val18 = (val2/val15);
                                 var val19 = (val18* 100).toFixed(2);
                                 if( !isNaN( val19) ) {
                                 $( "[id$=Percentage2]" ).val( val19 );
                                  } 
                                  
                                 var val20 = (val3/val15);
                                 var val21 = (val20* 100).toFixed(2);
                                 if( !isNaN( val21) ) {
                                 $( "[id$=Percentage3]" ).val( val21 );
                                  } 
                                  
                                 var val22 = (val4/val15);
                                 var val23 = (val22* 100).toFixed(2);
                                 if( !isNaN( val23) ) {
                                 $( "[id$=Percentage4]" ).val( val23 );
                                  } 
                                  
                                 var val24 = (val5/val15);
                                 var val25 = (val24* 100).toFixed(2);
                                 if( !isNaN( val25) ) {
                                 $( "[id$=Percentage5]" ).val( val25 );
                                  } 
                                  
                                 var val26 = (val6/val15);
                                 var val27 = (val26* 100).toFixed(2);
                                 if( !isNaN( val27) ) {
                                 $( "[id$=Percentage6]" ).val( val27 );
                                  } 
                                  
                                  var val28 = (val7/val15);
                                 var val29 = (val28* 100).toFixed(2);
                                 if( !isNaN( val29) ) {
                                 $( "[id$=Percentage7]" ).val( val29 );
                                  } 
                                
                               var total1 = parseFloat( val17 ) + parseFloat( val19 ) + parseFloat( val21 )+ parseFloat( val23 )+ parseFloat( val25 )+ parseFloat( val27 )+ parseFloat( val29 );
                               var ptotal = Math.round(total1);
                              
                               if( !isNaN( ptotal ) ) {
                                $( "[id$=result1]" ).val(ptotal );
                                } 
                                };
                                </script>
   
   

</span>
<!------------step-6------------------------>
 <span id="Step6" style="display:none">


        <div class="sub-heading"><h6>Undertaking</h6> </div>
        <br/>
       <div Class="col-lg-12">
         I/We undertake to:
        <li>Complete the research project in the stipulated period.</li>
        <li>Submit a Final copy of the research report to the University and a copy each to the Library and the Research Committee of the University.</li>
        <li>I/We understand that if the University is not satisfied with the progress of the research project, it may terminate the project immediately.</li>
        <li>I/We make commitment that in any publication/s arising out of this research project we would explicitly state that the FLAME University has provided full support (financial and others) for the project.</li>
        </div>
        
        <table>
        <tr>
        <td>
        <div class="slds-form-element" style="width:88%;">
        <label class="slds-form-element__label" >Principal Researcher</label> 
        <div>
        <apex:inputField value="{!userContact.Name}" styleClass="slds-input" id="AuthorName"/>
        </div>
        <div>
        <apex:outputLabel styleClass="redFont" id="errMsg45"></apex:outputLabel>
        </div>
        </div>
        </td>
        </tr>
        <tr>
       
        <div Class="col-lg-12">
        
        <td>
        <div Class="col-lg-5">
        <label class="slds-form-element__label" >Co-Researcher/s (if Any)</label> 
        <div>
        <apex:inputField value="{!Researchobj.Co_authors__c}" styleClass="slds-input" id="Coauthors"/>
        </div>
        <div>
        <apex:outputLabel styleClass="redFont" id="errMsg46"></apex:outputLabel>
        </div>
        </div>
       </td>
        
       <td>
        <div Class="col-lg-7">
        <label class="slds-form-element__label" >Dean/Head of Department</label> 
        <div>
        <apex:inputField value="{!Researchobj.Dean_HOD__c}" styleClass="slds-input" id="DeanHOD"/>
        </div>
        <div>
        <apex:outputLabel styleClass="redFont" id="errMsg47"></apex:outputLabel>
        </div>
        </div>
        </td>
        </div>
    </tr>
    </table>
</span>

 </div> <!-- border style--> 
  </div> </div> <!-- </div> -->
<br /> 
<!------html Buttons---------->
 <table border="0" cellpadding="5" cellspacing="0">

   <tr style="float:right;margin-top:10px;">

    
<td>
            
           <button id="ButtonPrevious" type="button" value="Previous" disabled="disabled" name="" onclick="handleWizardPrevious()" class="slds-button slds-button--neutral" >Previous</button>
            <button id="ButtonNext" type="button" value="Next" name="Step2" onclick="handleWizardNext();check_empty()" class="slds-button slds-button--neutral" > Next  </button> 
            
            <button id="SubmitFinal" type="button" value="Finish" disabled="disabled" class="slds-button slds-button--neutral" onclick="delayRedirect();actionFunction();"  > Finish</button>
            <apex:actionFunction name="actionFunction" reRender="basicid" action="{!Save}" status="AjaxLoader"  >
            </apex:actionFunction>
            <!-- --oncomplete="window.location.reload( true );"----->
   </td>       
            
    </tr>

</table>  
 <script>
       function delayRedirect(){
      
            var DeanHOD = document.getElementById("{!$Component.myForm.DeanHOD}");
            var DeanHOD1 = document.getElementById("{!$Component.myForm.errMsg47}");
            if (DeanHOD.value.length == 0) {
            DeanHOD.focus();
            DeanHOD.scrollIntoView();
            DeanHOD1.innerHTML = "Please Insert Dean/Head"
            return false;
            }else{
            DeanHOD1.innerHTML = "";
            }       
            
            
            Swal.fire({
            position: 'center',
            type: 'success',
            title: 'Thank you, research grant request has been submitted successfully.',
            showConfirmButton: false,
            timer: 5000,
           
            })
               
           setTimeout(function(){
            window.location.href = 'apex/Research_Grant_Request_Page';
         }, 5000);
        
       }
        
    </script>
     
             <script>editor.on('instanceReady', function() {editor.resize(0, 400);});</script>           
    
</div></div>

</apex:form>
</body>
         

</html>
    
    
    </apex:page>